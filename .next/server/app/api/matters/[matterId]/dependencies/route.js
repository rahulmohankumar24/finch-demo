"use strict";(()=>{var e={};e.id=133,e.ids=[133],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},4577:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")},3625:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>m,originalPathname:()=>f,requestAsyncStorage:()=>c,routeModule:()=>p,serverHooks:()=>l,staticGenerationAsyncStorage:()=>u,staticGenerationBailout:()=>k});var a={};r.r(a),r.d(a,{GET:()=>GET});var s=r(884),n=r(6132),o=r(5798),i=r(2429),d=r(8347);async function GET(e,{params:t}){try{let e=await (0,i.UE)(),r=e.getMatter(t.matterId);if(!r)return o.Z.json({success:!1,error:"Matter not found"},{status:404});let a={};for(let[e,t]of Object.entries(r.tasks))for(let s of(a[e]=[],t.dependencies)){let t=r.getTask(s.targetTaskId);if(!t)continue;let n="",o=!1;if(s.dependencyType===d.D1.TASK_COMPLETION)n=`Complete: ${t.name}`,o=t.completed;else if(s.dependencyType===d.D1.TIME_BASED){let e=s.timeDelayWeeks||0;if(n=`Wait: ${e} week${1!==e?"s":""} after ${t.name}`,t.completed&&t.completionDate){let r=new Date(t.completionDate);r.setDate(r.getDate()+7*e),o=new Date>=r}else o=!1}a[e].push({type:s.dependencyType,targetTask:s.targetTaskId,targetTaskName:t.name,timeDelayWeeks:s.timeDelayWeeks,description:n,isMet:o})}let s={};for(let[e,t]of Object.entries(r.tasks)){let a=t.checkDependenciesMet(r.tasks);s[e]={name:t.name,completed:t.completed,completionDate:t.completionDate?.toISOString(),dependenciesMet:a,canExecute:!t.completed&&a}}return o.Z.json({success:!0,matter:{matterId:r.matterId,clientName:r.clientName},dependencies:a,tasks:s})}catch(e){return console.error("Error fetching dependencies:",e),o.Z.json({success:!1,error:"Failed to fetch dependencies"},{status:500})}}let p=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/matters/[matterId]/dependencies/route",pathname:"/api/matters/[matterId]/dependencies",filename:"route",bundlePath:"app/api/matters/[matterId]/dependencies/route"},resolvedPagePath:"/Users/rahulmohankumar/Downloads/finch/app/api/matters/[matterId]/dependencies/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:c,staticGenerationAsyncStorage:u,serverHooks:l,headerHooks:m,staticGenerationBailout:k}=p,f="/api/matters/[matterId]/dependencies/route"}};var t=require("../../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[585,429],()=>__webpack_exec__(3625));module.exports=r})();