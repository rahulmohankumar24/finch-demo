"use strict";(()=>{var e={};e.id=479,e.ids=[479],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},4577:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")},197:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>p,originalPathname:()=>k,requestAsyncStorage:()=>c,routeModule:()=>i,serverHooks:()=>d,staticGenerationAsyncStorage:()=>l,staticGenerationBailout:()=>m});var a={};r.r(a),r.d(a,{GET:()=>GET,POST:()=>POST});var s=r(884),o=r(6132),n=r(5798),u=r(2429);async function GET(){try{let e=await (0,u.UE)(),t=e.listMatters();return n.Z.json({success:!0,matters:t})}catch(e){return n.Z.json({success:!1,error:"Failed to fetch matters"},{status:500})}}async function POST(e){try{let{matterId:t,clientId:r,clientName:a}=await e.json();if(!t||!r||!a)return n.Z.json({success:!1,error:"matterId, clientId, and clientName are required"},{status:400});let s=await (0,u.UE)();try{let e=s.createMatter(t,r,a);return console.log(`Created matter ${t} with ${Object.keys(e.tasks).length} default tasks`),console.log("Default tasks:",Object.keys(e.tasks)),await (0,u.En)(s),console.log("Matter and tasks saved to database"),n.Z.json({success:!0,message:`Matter ${t} created for ${a}`,matter:{matterId:e.matterId,clientId:e.clientId,clientName:e.clientName,createdDate:e.createdDate.toISOString(),taskCount:Object.keys(e.tasks).length}})}catch(e){return console.error("Error creating matter:",e),n.Z.json({success:!1,error:e instanceof Error?e.message:"Unknown error"},{status:400})}}catch(e){return n.Z.json({success:!1,error:"Invalid request body"},{status:400})}}let i=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/matters/route",pathname:"/api/matters",filename:"route",bundlePath:"app/api/matters/route"},resolvedPagePath:"/Users/rahulmohankumar/Downloads/finch/app/api/matters/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:c,staticGenerationAsyncStorage:l,serverHooks:d,headerHooks:p,staticGenerationBailout:m}=i,k="/api/matters/route"}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[585,429],()=>__webpack_exec__(197));module.exports=r})();